---
name: context-engineering-collection
description: 一个涵盖上下文工程、多智能体架构和生产智能体系统的智能体技能综合集合。在构建、优化或调试需要有效上下文管理的智能体系统时使用。
---

# 上下文工程智能体技能集合

本集合为通过有效的上下文工程构建生产级 AI 智能体系统提供结构化指南。

## 何时激活

当出现以下情况时激活这些技能：
- 从头开始构建新的智能体系统。
- 优化现有智能体的性能。
- 调试与上下文相关的故障。
- 设计多智能体架构。
- 为智能体创建或评估工具。
- 实现记忆和持久层。

## 技能图谱

### 基础上下文工程

**理解上下文基础**
上下文不仅仅是提示词文本——它是语言模型在推理时可用的完整状态，包括系统指令、工具定义、检索到的文档、消息历史记录和工具输出。有效的上下文工程意味着理解哪些信息对当前任务真正重要，并对这些信息进行策划以获得最大的信噪比。

**识别上下文退化**
随着上下文的增长，语言模型表现出可预测的退化模式：在上下文中间的信息受到的关注较少的“中段迷失”现象；优先考虑开头和结尾的 U 型注意力曲线；当错误累积时的上下文中毒；以及当无关信息压倒相关内容时的上下文干扰。

### 架构模式

**多智能体协作**
生产环境的多智能体系统倾向于三种主流模式：具有集中控制权的主管/编排者架构，用于灵活交接的点对点 Swarm 架构，以及用于复杂任务分解的分级结构。关键见解在于，子智能体的存在主要是为了隔离上下文，而不是为了模拟组织角色。

**记忆系统设计**
记忆架构从简单的暂存器（Scratchpads）到复杂的时态知识图谱不等。向量 RAG 提供了语义检索，但丢失了关系信息。知识图谱保留了结构，但需要更多的工程投入。文件系统即记忆模式（File-system-as-memory）在不塞满上下文窗口的情况下实现即时上下文加载。

**工具设计原则**
工具是确定性系统与非确定性智能体之间的契约。有效的工具设计遵循合并原则（优先选择单一的综合工具，而非多个狭义工具），在错误中返回上下文信息，为了 Token 效率支持响应格式选项，并使用清晰的命名空间。

### 卓越运营

**上下文压缩**
当智能体会话耗尽内存时，压缩变得至关重要。正确的优化目标是“单任务 Token 数”，而非“单请求 Token 数”。相比于激进的压缩，带有文件、决策和下一步行动明确部分的结构化总结能保留更多有用的信息。在所有压缩方法中，工件轨迹（Artifact trail）的完整性仍然是最薄弱的维度。

**上下文优化**
技术包括压缩（在接近限制时总结上下文）、观察遮蔽（用引用替换冗长的工具输出）、前缀缓存（跨请求重用 KV 块）以及战略性上下文分区（将工作划分给具有隔离上下文的子智能体）。

**评估框架**
生产环境智能体评估需要多维度评分表（Rubrics），涵盖事实准确性、完整性、工具效率和过程质量。有效的模式包括用于扩展性的 LLM-as-judge，用于边缘情况的人工评估，以及针对修改持久状态的智能体的终态评估。

### 开发方法论

**项目开发**
有效的 LLM 项目开发始于任务-模型匹配分析：在构建自动化之前，通过手动打样验证任务是否适合 LLM 处理。生产流水线遵循分阶段、幂等的架构（获取、准备、处理、解析、呈现），并使用文件系统状态管理进行调试和缓存。带有明确格式规范的结构化输出设计实现了可靠的解析。从最小化架构开始，仅在证明必要时才增加复杂性。

## 核心概念

本集合围绕三个核心主题组织。首先，**上下文基础**确立了什么是上下文、注意力机制如何工作，以及为什么上下文的质量比数量更重要。其次，**架构模式**涵盖了实现有效智能体系统的结构和协调机制。第三，**卓越运营**解决了优化和评估生产环境系统的持续性工作。

## 实践指南

每个技能都可以独立使用或组合使用。从基础技能开始建立上下文管理的思维模型。根据你的系统需求分支到架构模式。在优化生产系统时参考运营类技能。

这些技能独立于平台，适用于 Claude Code、Cursor 或任何支持自定义指令或技能类结构的智能体框架。

## 集成

本集合内部高度集成——各技能相互参考并建立在共享概念之上。基础技能为所有其他技能提供背景。架构类技能（多智能体、记忆、工具）可以组合用于复杂系统。运营类技能（优化、评估）适用于使用基础和架构技能构建的任何系统。

## 参考资料

本集合中的内部技能：
- [context-fundamentals](skills/context-fundamentals/SKILL_zh.md)
- [context-degradation](skills/context-degradation/SKILL_zh.md)
- [context-compression](skills/context-compression/SKILL_zh.md)
- [multi-agent-patterns](skills/multi-agent-patterns/SKILL_zh.md)
- [memory-systems](skills/memory-systems/SKILL_zh.md)
- [tool-design](skills/tool-design/SKILL_zh.md)
- [context-optimization](skills/context-optimization/SKILL_zh.md)
- [evaluation](skills/evaluation/SKILL_zh.md)
- [project-development](skills/project-development/SKILL_zh.md)

上下文工程的外部资源：
- 注意力机制和上下文窗口限制的相关研究
- 来自领先 AI 实验室关于智能体系统设计的生产经验
- LangGraph、AutoGen 和 CrewAI 的框架文档

---

## 技能元数据

**创建日期**：2025-12-20
**上次更新**：2025-12-25
**作者**：上下文工程智能体技能贡献者
**版本**：1.2.0
